<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forgot Password - Projexia</title>
    <link rel="stylesheet" href="/css/common.css">
    <link rel="stylesheet" href="/css/publicHeaderFooter.css">
    <link rel="stylesheet" href="/css/modal.css">
    <link rel="stylesheet" href="/css/auth.css">
</head>
<body>
    <%- include('partials/publicHeader') %>
    
    <div class="auth-page">
      <div class="auth-container">
        
        <!-- Left Side - Info -->
        <div class="auth-info">
          <div class="auth-info__badge">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 16px; height: 16px;">
              <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
              <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
            </svg>
            Password Recovery
          </div>
          
          <h1 class="auth-info__title">Reset Your Password</h1>
          <p class="auth-info__subtitle">
            Don't worry! It happens. Follow these simple steps to reset your password and regain access to your account.
          </p>
          
          <div class="auth-info__features">
            <div class="feature-item">
              <div class="feature-icon">
                <div style="font-size: 1.5rem; font-weight: 700; color: white;">1</div>
              </div>
              <div class="feature-content">
                <h3>Enter Email</h3>
                <p>Provide your LSPU institutional email address</p>
              </div>
            </div>
            
            <div class="feature-item">
              <div class="feature-icon">
                <div style="font-size: 1.5rem; font-weight: 700; color: white;">2</div>
              </div>
              <div class="feature-content">
                <h3>Verify Code</h3>
                <p>Enter the 5-digit code sent to your email</p>
              </div>
            </div>
            
            <div class="feature-item">
              <div class="feature-icon">
                <div style="font-size: 1.5rem; font-weight: 700; color: white;">3</div>
              </div>
              <div class="feature-content">
                <h3>New Password</h3>
                <p>Create a new secure password for your account</p>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Right Side - Form -->
        <div class="auth-form-container">
          
          <!-- Progress Steps -->
          <div class="auth-steps">
            <div class="step active" id="stepIndicator1">1</div>
            <div class="step" id="stepIndicator2">2</div>
            <div class="step" id="stepIndicator3">3</div>
          </div>
          
          <!-- Step 1: Enter Email -->
          <div id="step1" class="auth-step active">
            <div class="auth-form__header">
              <h2>Enter Your Email</h2>
              <p>We'll send you a verification code</p>
            </div>
            
            <form id="requestResetForm" class="auth-form">
              <div class="form-group">
                <label for="email">Email Address</label>
                <input 
                  type="email" 
                  id="email" 
                  name="email" 
                  placeholder="your.email@lspu.edu.ph"
                  pattern=".*@lspu\.edu\.ph$"
                  required
                />
                <small class="form-hint">Use your LSPU institutional email</small>
              </div>

              <button type="submit" class="btn-submit" id="sendCodeBtn">
                Send Verification Code
              </button>
            </form>

            <div class="auth-link" style="margin-top: 1.5rem;">
              Remember your password? <a href="/signin">Sign In</a>
            </div>
          </div>

          <!-- Step 2: Verify Code -->
          <div id="step2" class="auth-step">
            <div class="auth-form__header">
              <h2>Enter Verification Code</h2>
              <p>Check your email for the 5-digit code</p>
            </div>
            
            <form id="verifyCodeForm" class="auth-form">
              <div class="form-group">
                <label for="otp">Verification Code</label>
                <input 
                  type="text" 
                  id="otp" 
                  name="otp" 
                  placeholder="12345"
                  maxlength="5"
                  pattern="[0-9]{5}"
                  required
                  style="text-align: center; font-size: 1.5rem; letter-spacing: 0.5rem;"
                />
                <small class="form-hint">Enter the 5-digit code sent to your email</small>
              </div>

              <button type="submit" class="btn-submit" id="verifyCodeBtn">
                Verify Code
              </button>
            </form>

            <div class="auth-link" style="margin-top: 1.5rem;">
              Didn't receive code? <a href="#" id="resendCode">Resend Code</a>
              <br><br>
              <a href="#" id="backToStep1">‚Üê Back to Email</a>
            </div>
          </div>

          <!-- Step 3: Reset Password -->
          <div id="step3" class="auth-step">
            <div class="auth-form__header">
              <h2>Create New Password</h2>
              <p>Choose a strong password</p>
            </div>
            
            <form id="resetPasswordForm" class="auth-form">
              <div class="form-group">
                <label for="newPassword">New Password</label>
                <input 
                  type="password" 
                  id="newPassword" 
                  name="newPassword" 
                  placeholder="At least 8 characters"
                  minlength="8"
                  required
                />
              </div>

              <div class="form-group">
                <label for="confirmPassword">Confirm Password</label>
                <input 
                  type="password" 
                  id="confirmPassword" 
                  name="confirmPassword" 
                  placeholder="Re-enter your password"
                  minlength="8"
                  required
                />
              </div>

              <button type="submit" class="btn-submit" id="resetPasswordBtn">
                Reset Password
              </button>
            </form>
          </div>

          <!-- Success Message -->
          <div id="successMessage" class="auth-step">
            <div style="text-align: center;">
              <div class="confirmation-icon" style="margin: 0 auto 2rem;">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                  <polyline points="20 6 9 17 4 12"></polyline>
                </svg>
              </div>
              <h2 style="font-size: 2rem; color: var(--color-ink); margin-bottom: 1rem;">Password Reset Successful!</h2>
              <p style="color: var(--color-neutral); margin-bottom: 2rem;">Your password has been reset successfully.</p>
              <a href="/signin" class="btn-submit" style="display: inline-block; text-decoration: none;">Sign In Now</a>
            </div>
          </div>

        </div>
        
      </div>
    </div>
    
    <%- include('partials/publicFooter') %>

    <script src="/js/config.js"></script>
    <script src="/js/passwordToggle.js"></script>
    <script src="/js/modal.js"></script>
    <script src="/js/publicHeaderFooter.js"></script>
    <script src="/js/forgotPassword.js"></script>
</body>
</html>
